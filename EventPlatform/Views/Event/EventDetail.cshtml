@{
    ViewData["Title"] = "Event Details";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .event-details-banner {
            background: linear-gradient(to right, #e91e63, #fdfdfd);
            color: #333;
            padding: 80px 0;
            text-align: center;
            margin-bottom: 40px;
        }

            .event-details-banner h1 {
                font-size: 48px;
                margin-bottom: 10px;
            }

        .breadcrumb {
            font-size: 14px;
        }

            .breadcrumb a {
                color: white;
                text-decoration: none;
                opacity: 0.8;
            }

                .breadcrumb a:hover {
                    opacity: 1;
                }

            .breadcrumb span {
                margin: 0 5px;
                color: #e91e63;
            }

        .event-details-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .event-info-left {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .event-main-image {
            width: 100%;
            height: 400px;
            background: #ddd;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .event-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 14px;
            color: #666;
            flex-wrap: wrap;
            gap: 15px;
        }

            .event-meta .item {
                display: flex;
                align-items: center;
                gap: 8px;
            }

                .event-meta .item i {
                    color: #e91e63;
                }

            .event-meta .seat-badge {
                background: #e91e63;
                color: white;
                padding: 5px 10px;
                border-radius: 4px;
                font-size: 12px;
                font-weight: bold;
            }

        .event-details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 30px;
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

            .detail-item i {
                color: #e91e63;
                font-size: 20px;
            }

            .detail-item p {
                font-size: 13px;
                color: #555;
                font-weight: 500;
            }

            .detail-item .rating {
                color: #ffc107;
            }

        .event-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            position: relative;
        }

            .event-nav::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 0;
                right: 0;
                height: 1px;
                background: #eee;
                z-index: 1;
            }

        .event-nav-item {
            background: white;
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid #ddd;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            color: #555;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 5px;
        }

            .event-nav-item.active {
                background: #e91e63;
                color: white;
                border-color: #e91e63;
            }

            .event-nav-item:hover:not(.active) {
                border-color: #e91e63;
                color: #e91e63;
            }

        .event-description h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .event-description p {
            line-height: 1.7;
            margin-bottom: 15px;
            font-size: 15px;
            color: #555;
        }

        .event-description ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 20px;
        }

            .event-description ul li {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 10px;
                font-size: 15px;
                color: #555;
            }

                .event-description ul li i {
                    color: #e91e63;
                }

        .event-description .image-row {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

            .event-description .image-row img {
                width: 50%;
                height: 200px;
                object-fit: cover;
                border-radius: 8px;
            }

        .main-speaker h2 {
            font-size: 24px;
            margin-top: 30px;
            margin-bottom: 20px;
        }

        .speaker-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .speaker-card-full {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
        }

            .speaker-card-full img {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                object-fit: cover;
                background: #ddd;
            }

            .speaker-card-full .name {
                font-weight: bold;
                font-size: 16px;
            }

            .speaker-card-full .role {
                font-size: 13px;
                color: #777;
            }

            .speaker-card-full .social-icons {
                margin-top: 8px;
                display: flex;
                gap: 10px;
            }

                .speaker-card-full .social-icons a {
                    color: #e91e63;
                    font-size: 16px;
                    transition: color 0.3s;
                }

                    .speaker-card-full .social-icons a:hover {
                        color: #c2154a;
                    }

        .event-sponsors h2 {
            font-size: 24px;
            margin-top: 30px;
            margin-bottom: 20px;
        }

        .sponsors-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            justify-items: center;
            align-items: center;
            margin-bottom: 30px;
        }

        .sponsor-logo {
            max-width: 100px;
            height: auto;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

            .sponsor-logo:hover {
                opacity: 1;
            }

        .event-sidebar-right {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .book-event-form {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

            .book-event-form h3 {
                font-size: 20px;
                margin-bottom: 20px;
                display: flex;
                align-items: center;
                gap: 10px;
                color: #e91e63;
            }

        .form-group {
            margin-bottom: 15px;
        }

            .form-group label {
                display: block;
                font-size: 13px;
                margin-bottom: 5px;
                color: #666;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                width: 100%;
                padding: 10px 15px;
                border: 1px solid #ddd;
                border-radius: 4px;
                font-size: 14px;
            }

            .form-group textarea {
                min-height: 100px;
                resize: vertical;
            }

        .book-event-form button {
            background: #e91e63;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            transition: background 0.3s ease;
        }

            .book-event-form button:hover {
                background: #c2154a;
            }

        .recent-events-sidebar {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

            .recent-events-sidebar h3 {
                font-size: 20px;
                margin-bottom: 20px;
                display: flex;
                align-items: center;
                gap: 10px;
                color: #333;
            }

        .sidebar-event-card {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

            .sidebar-event-card:last-child {
                border-bottom: none;
                margin-bottom: 0;
                padding-bottom: 0;
            }

        .sidebar-event-image {
            width: 80px;
            height: 80px;
            background: #ddd;
            object-fit: cover;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .sidebar-event-content h4 {
            font-size: 15px;
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .sidebar-event-content p {
            font-size: 12px;
            color: #777;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 5px;
        }

            .sidebar-event-content p i {
                color: #e91e63;
            }

        .sidebar-event-content .price {
            font-weight: bold;
            color: #e91e63;
            font-size: 14px;
        }

            .sidebar-event-content .price span {
                color: #777;
                text-decoration: line-through;
                margin-left: 5px;
            }

        .event-organizer-sidebar {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

            .event-organizer-sidebar h3 {
                font-size: 20px;
                margin-bottom: 20px;
                display: flex;
                align-items: center;
                gap: 10px;
                color: #333;
                justify-content: center;
            }

        .organizer-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #ddd;
            object-fit: cover;
            margin: 0 auto 15px;
        }

        .organizer-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .organizer-role {
            font-size: 14px;
            color: #777;
            margin-bottom: 15px;
        }

        .organizer-signature {
            width: 100px;
            height: auto;
            margin-top: 20px;
            opacity: 0.7;
        }

        .special-offer-card {
            background-image: url('https://www.google.com/url?sa=i&url=https%3A%2F%2Fwallpapers.com%2Fblush-pink-background&psig=AOvVaw2HMfQYUsHmDIIrIDXQ244X&ust=1760712567260000&source=images&cd=vfe&opi=89978449&ved=0CBUQjRxqFwoTCLi-ssv7qJADFQAAAAAdAAAAABAE');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

            .special-offer-card .discount {
                position: absolute;
                top: 15px;
                right: 15px;
                background: white;
                color: #e91e63;
                padding: 5px 10px;
                border-radius: 4px;
                font-weight: bold;
                font-size: 13px;
            }

            .special-offer-card h4 {
                font-size: 18px;
                color: #e91e63;
                margin-bottom: 10px;
            }

            .special-offer-card h2 {
                font-size: 28px;
                margin-bottom: 15px;
            }

            .special-offer-card .button {
                background: #e91e63;
                color: white;
                padding: 12px 25px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
                transition: background 0.3s;
                margin-top: 20px;
            }

                .special-offer-card .button:hover {
                    background: #c2154a;
                }

        .comments-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }

        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

            .comments-header h3 {
                font-size: 22px;
            }

        .comments-pagination {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 14px;
        }

            .comments-pagination a {
                color: #e91e63;
                text-decoration: none;
            }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .comment-item {
            display: flex;
            gap: 20px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
        }

            .comment-item:last-child {
                border-bottom: none;
                padding-bottom: 0;
            }

        .comment-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ddd;
            object-fit: cover;
            flex-shrink: 0;
        }

        .comment-content .author {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .comment-content .date {
            font-size: 12px;
            color: #777;
            margin-bottom: 10px;
        }

        .comment-content p {
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 10px;
        }

        .comment-content .reply-btn {
            color: #e91e63;
            text-decoration: none;
            font-weight: 600;
            font-size: 13px;
        }

        .leave-comment-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }

            .leave-comment-section h3 {
                font-size: 22px;
                margin-bottom: 20px;
            }

        .comment-form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

            .comment-form-grid .form-group {
                margin-bottom: 0;
            }

        .leave-comment-section .form-group textarea {
            min-height: 150px;
        }

        .leave-comment-section button {
            background: #e91e63;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

            .leave-comment-section button:hover {
                background: #c2154a;
            }

        .related-events-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }

        .related-events-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

            .related-events-header h3 {
                font-size: 22px;
            }

        .related-events-nav {
            display: flex;
            gap: 10px;
        }

            .related-events-nav button {
                background: #eee;
                border: none;
                width: 35px;
                height: 35px;
                border-radius: 50%;
                cursor: pointer;
                color: #e91e63;
                font-size: 16px;
                transition: background 0.3s;
            }

                .related-events-nav button:hover {
                    background: #ddd;
                }

        .related-events-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        .related-event-card {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

            .related-event-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            }

        .related-event-image-wrapper {
            position: relative;
            width: 100%;
            height: 180px;
            background: #ddd;
            object-fit: cover;
        }

            .related-event-image-wrapper img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .related-event-image-wrapper .seat-badge {
                position: absolute;
                bottom: 15px;
                left: 15px;
                background: #e91e63;
                color: white;
                padding: 5px 10px;
                border-radius: 4px;
                font-size: 12px;
                font-weight: bold;
                display: flex;
                align-items: center;
                gap: 5px;
            }

        .related-event-card-content {
            padding: 15px;
            background: white;
        }

        .related-event-card-meta {
            font-size: 12px;
            color: #777;
            margin-bottom: 10px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

            .related-event-card-meta .item {
                display: flex;
                align-items: center;
                gap: 5px;
            }

                .related-event-card-meta .item i {
                    color: #e91e63;
                }

        .related-event-card-title {
            font-size: 15px;
            font-weight: bold;
            line-height: 1.4;
            margin-bottom: 15px;
        }

        .related-event-book-btn {
            background: #e91e63;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-size: 13px;
            width: 100%;
            transition: background 0.3s;
        }

        .related-event-book-btn:hover {
            background: #c2154a;
        }

    </style>
</head>
<body>
    <div class="event-details-banner">
        <div class="container">
            <h1>Event Details</h1>
            <p class="breadcrumb">
                <a href="/">Home</a> <span>/</span> Event Details
            </p>
        </div>
    </div>

    <div id="loading-spinner" style="text-align: center; padding: 50px; font-size: 2em;"><i class="fas fa-spinner fa-spin"></i></div>

    <div class="container event-details-content" id="event-detail-container" style="display: none;">

        <div class="event-info-left">

            <img class="event-main-image" src="" alt="Main Event Image" />

            <div class="event-meta">
                <div class="item" id="event-meta-date"></div>
                <div class="item" id="event-meta-seats"></div>
                <div class="item" id="event-meta-location"></div>
            </div>

            <div class="event-details-grid">
                <div class="detail-item">
                    <i class="fas fa-tag"></i>
                    <p>Event Type</p>
                    <span id="event-detail-category"></span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-microphone-alt"></i>
                    <p>Speaker</p>
                    <span id="event-detail-speaker-count"></span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-star"></i>
                    <p>Rating</p>
                    <div class="rating" id="event-detail-rating"></div>
                </div>
            </div>

            <div class="event-nav">
                <div class="event-nav-item active"><i class="fas fa-info-circle"></i> Details</div>
                <div class="event-nav-item"><i class="far fa-calendar-check"></i> Schedule</div>
                <div class="event-nav-item"><i class="far fa-images"></i> Gallery</div>
            </div>

            <div class="event-description">
                <h2 id="event-title"></h2>
                <div id="event-description-html"></div>

                <h2>Over View</h2>
                <ul>
                    <li><i class="fas fa-check"></i> You Got Full Free Certificate</li>
                    <li><i class="fas fa-check"></i> Unlimited Coffee & Tea When U Boring</li>
                    <li><i class="fas fa-check"></i> Etiam Dictum. Dui Sit Amet Venenatis.</li>
                    <li><i class="fas fa-check"></i> Class Aptent Taciti Sociosqu Ad Litora.</li>
                    <li><i class="fas fa-check"></i> Lunch Suspendisse In Commodo Feli.</li>
                </ul>
                <div class="image-row">
                    <img src="https://via.placeholder.com/400x200/ddd/555?text=Event+Image+1" alt="Event Image 1" />
                    <img src="https://via.placeholder.com/400x200/ccc/666?text=Event+Image+2" alt="Event Image 2" />
                </div>
            </div>

            <div class="main-speaker">
                <h2>Main Speaker</h2>
                <div class="speaker-grid" id="speaker-grid-container">
                </div>
            </div>

            <div class="event-sponsors">
                <h2>This Event Sponsor</h2>
                <div class="sponsors-grid">
                    <img class="sponsor-logo" src="https://via.placeholder.com/100x50/eee/333?text=Klarna" alt="Klarna" />
                    <img class="sponsor-logo" src="https://via.placeholder.com/100x50/eee/333?text=Elegante" alt="Elegante" />
                    <img class="sponsor-logo" src="https://via.placeholder.com/100x50/eee/333?text=Cisco" alt="Cisco" />
                    <img class="sponsor-logo" src="https://via.placeholder.com/100x50/eee/333?text=Zara" alt="Zara" />
                </div>
            </div>
        </div>

        <div class="event-sidebar-right">

            <div class="book-event-form">
                <h3><i class="fas fa-ticket-alt"></i> Book This Event</h3>
                <form>
                    <div class="form-group">
                        <input type="text" placeholder="Your Full Name">
                    </div>
                    <div class="form-group">
                        <input type="email" placeholder="Your Email">
                    </div>
                    <div class="form-group">
                        <input type="tel" placeholder="Phone">
                    </div>
                    <div class="form-group">
                        <select>
                            <option>Select Quantity</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="Message"></textarea>
                    </div>
                    <button type="submit">Book Now</button>
                </form>
            </div>

            <div class="recent-events-sidebar">
                <h3><i class="far fa-calendar-alt"></i> Recent Event</h3>
                <div class="sidebar-event-card">
                    <img class="sidebar-event-image" src="https://via.placeholder.com/80x80/ccc/333?text=Event" alt="Event Image" />
                    <div class="sidebar-event-content">
                        <h4>Donec Risus Dui, Suscipit land Temper Lacinia Vehicula.</h4>
                        <p><i class="far fa-calendar-alt"></i> December 25, 2020</p>
                        <div class="price">$199 <span>$299</span></div>
                    </div>
                </div>
            </div>

            <div class="event-organizer-sidebar">
                <h3><i class="fas fa-user-tie"></i> Event Organized By</h3>
                <img class="organizer-avatar" src="" alt="Organizer" id="organizer-avatar" />
                <div class="organizer-name" id="organizer-name"></div>
                <div class="organizer-role">Event Lab</div> <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
                <img class="organizer-signature" src="https://via.placeholder.com/100x50/f9f9f9/333?text=Signature" alt="Signature" />
            </div>

            <div class="special-offer-card">
                <span class="discount">20% OFF</span>
                <h4>ONLY 2 DAYS LEFT</h4>
                <h2>BEST SOFTWARE <br /> COMPANY.</h2>
                <button class="button">Book Now</button>
            </div>
        </div>
    </div>

    <div class="container comments-section">
        <div class="comments-header">
            <h3 id="feedback-count">Feedbacks (0)</h3>
            <div class="comments-pagination">
                <a href="#"> <i class="fas fa-chevron-left"></i> Previous</a>
                <a href="#">Next <i class="fas fa-chevron-right"></i></a>
            </div>
        </div>
        <div class="comments-list" id="comments-list-container">
        </div>
    </div>

    <div class="container leave-comment-section">
        <h3>Leave Your Comment</h3>
        <form>
            <div class="form-group">
                <input type="text" placeholder="Your Full Name">
            </div>
            <div class="comment-form-grid">
                <div class="form-group">
                    <input type="email" placeholder="Your Email">
                </div>
                <div class="form-group">
                    <input type="text" placeholder="Subject">
                </div>
            </div>
            <div class="form-group">
                <textarea placeholder="Message"></textarea>
            </div>
            <button type="submit">Submit Now</button>
        </form>
    </div>

    <div class="container related-events-section">
        <div class="related-events-header">
            <h3>Related Event</h3>
            <div class="related-events-nav">
                <button><i class="fas fa-chevron-left"></i></button>
                <button><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
        <div class="related-events-grid">
            <div class="related-event-card">
                <div class="related-event-image-wrapper">
                    <img src="https://via.placeholder.com/300x180/ccc/333?text=Event+1" alt="Related Event 1" />
                    <span class="seat-badge"><i class="fas fa-chair"></i> 500 Seat</span>
                </div>
                <div class="related-event-card-content">
                    <div class="related-event-card-meta">
                        <div class="item"><i class="far fa-calendar-alt"></i> December 25, 2021</div>
                        <div class="item"><i class="fas fa-map-marker-alt"></i> Broadway, New York</div>
                    </div>
                    <h4 class="related-event-card-title">Donec Risus Dui, Suscipit Id Leogenic Tempor Lacinia Vehicula.</h4>
                    <button class="related-event-book-btn">BOOK NOW</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const loadingSpinner = document.getElementById('loading-spinner');
        const contentContainer = document.getElementById('event-detail-container');

        try {
            // 1. Lấy Event ID từ URL
            const params = new URLSearchParams(window.location.search);
            const eventId = params.get('id');
            const API_BASE_URL = "https://localhost:7063"; // Đảm bảo cổng này đúng

            if (!eventId) {
                throw new Error("Event ID not found in URL.");
            }

            // 2. Gọi API chi tiết sự kiện
            const response = await fetch(`${API_BASE_URL}/api/Events/${eventId}`);
            if (!response.ok) {
                if (response.status === 404) {
                    throw new Error("Event not found.");
                }
                throw new Error("Failed to load event data.");
            }

            const event = await response.json(); // Đây là EventDetailDto

            // 3. Đổ dữ liệu vào trang
            populatePage(event);

            // 4. Ẩn spinner, hiện nội dung
            loadingSpinner.style.display = 'none';
            contentContainer.style.display = 'grid'; // Đổi thành 'grid' để khớp layout

        } catch (error) {
            console.error(error);
            loadingSpinner.innerHTML = `<p style="color: red;">${error.message}</p>`;
        }
    });

    function populatePage(event) {
        // Định dạng ngày
        const eventDate = new Date(event.startTime).toLocaleDateString('en-US', {
            year: 'numeric', month: 'long', day: 'numeric'
        });

        // Cột trái - Thông tin chung
        document.querySelector('.event-main-image').src = event.coverImageUrl || 'https://via.placeholder.com/800x400';
        document.getElementById('event-meta-date').innerHTML = `<i class="far fa-calendar-alt"></i> ${eventDate}`;
        document.getElementById('event-meta-seats').innerHTML = `<span class="seat-badge"><i class="fas fa-chair"></i> ${event.totalSeats} Seat</span>`;
        document.getElementById('event-meta-location').innerHTML = `<i class="fas fa-map-marker-alt"></i> ${event.location || 'Online'}`;

        // Cột trái - Grid chi tiết
        document.getElementById('event-detail-category').textContent = event.categoryName || 'N/A';
        document.getElementById('event-detail-speaker-count').textContent = `${event.speakers.length} Speaker(s)`;

        // Hiển thị sao rating
        const ratingStars = Math.round(event.ratingAverage);
        let starsHtml = '';
        for(let i = 0; i < 5; i++) {
            starsHtml += `<i class="${i < ratingStars ? 'fas' : 'far'} fa-star"></i>`;
        }
        document.getElementById('event-detail-rating').innerHTML = `${starsHtml} (${event.ratingCount})`;

        // Cột trái - Mô tả
        document.getElementById('event-title').textContent = event.title;
        document.getElementById('event-description-html').innerHTML = event.description; // Giả sử description là HTML

        // Cột trái - Render Speakers
        const speakerGrid = document.getElementById('speaker-grid-container');
        speakerGrid.innerHTML = ''; // Xóa placeholder
        if(event.speakers.length > 0) {
            event.speakers.forEach(speaker => {
                speakerGrid.insertAdjacentHTML('beforeend', `
                    <div class="speaker-card-full">
                        <img src="${speaker.avatarUrl || 'https://via.placeholder.com/80x80'}" alt="${speaker.fullName}" />
                        <div>
                            <div class="name">${speaker.fullName}</div>
                            <div class="role">${speaker.jobTitle || 'Speaker'}</div>
                            <div class="social-icons">
                                </div>
                        </div>
                    </div>
                `);
            });
        } else {
            speakerGrid.innerHTML = '<p>No speaker information available.</p>';
        }

        // Sidebar phải - Ban tổ chức
        document.getElementById('organizer-avatar').src = event.organizerLogoUrl || 'https://via.placeholder.com/100x100';
        document.getElementById('organizer-name').textContent = event.organizerName || 'N/A';

        // Phần Feedback
        document.getElementById('feedback-count').textContent = `Feedbacks (${event.feedbacks.length})`;
        const commentsList = document.getElementById('comments-list-container');
        commentsList.innerHTML = ''; // Xóa placeholder
        if (event.feedbacks.length > 0) {
            event.feedbacks.forEach(fb => {
                const fbDate = new Date(fb.submittedAt).toLocaleString('en-US');
                commentsList.insertAdjacentHTML('beforeend', `
                    <div class="comment-item">
                        <img class="comment-avatar" src="${fb.authorAvatarUrl || 'https://via.placeholder.com/60x60'}" alt="${fb.authorName}" />
                        <div class="comment-content">
                            <div class="author">${fb.authorName}</div>
                            <div class="date">${fbDate}</div>
                            <p>${fb.comment}</p>
                            </div>
                    </div>
                `);
            });
        } else {
            commentsList.innerHTML = '<p>Be the first to leave a feedback!</p>';
        }
    }
</script>